/**
 * nsPopover - v0.5.8 - 2014-06-26
 * http://nohros.com/nsPopover
 *
 * Copyright (c) 2014 Neylor Ohmaly
 * Licensed MIT <https://raw.github.com/nohros/nsPopover/master/LICENSE>
 */
!function(a,b,c){"use strict";var d=b.module("nsPopover",[]),e=b.element,f=b.isDefined,g=(b.forEach,[]),h=0;d.directive("nsPopover",function(d,i,j,k,l,m){return{restrict:"A",scope:!0,link:function(n,o,p){function q(a,b,c,d,e){var f,g,h=r(a[0]),i=function(){return"center"===c?Math.round(d.left+d.width/2-h.width/2):"right"===c?d.right-h.width:d.left},j=function(){return"center"===c?Math.round(d.top+d.height/2-h.height/2):"bottom"===c?d.bottom-h.height:d.top};"top"===b?(f=d.top-h.height,g=i()):"right"===b?(f=j(),g=d.right):"bottom"===b?(f=d.bottom,g=i()):"left"===b&&(f=j(),g=d.left-h.width),a.css("top",f.toString()+"px").css("left",g.toString()+"px"),e&&("top"===b||"bottom"===b?(g=d.left+d.width/2-g,e.css("left",g.toString()+"px")):(f=d.top+d.height/2-f,e.css("top",f.toString()+"px")))}function r(b){var c=a,d=document.documentElement||document.body.parentNode||document.body,e=f(c.pageXOffset)?c.pageXOffset:d.scrollLeft,g=f(c.pageYOffset)?c.pageYOffset:d.scrollTop,h=b.getBoundingClientRect();return e||g?{bottom:h.bottom+g,left:h.left+e,right:h.right+e,top:h.top+g,height:h.height,width:h.width}:h}function s(a,c){return a?b.isString(a)&&c?a:i.get(a)||k.get(a,{cache:!0}):""}var t={template:p.nsPopoverTemplate,theme:p.nsPopoverTheme||"ns-popover-list-theme",plain:p.nsPopoverPlain,trigger:p.nsPopoverTrigger||"click",container:p.nsPopoverContainer,placement:p.nsPopoverPlacement||"bottom|left",timeout:p.nsPopoverTimeout||1.5,hideOnClick:"true"===p.nsPopoverHideOnClick||p.nsPopoverHideOnClick===c},u={id_:c,hide:function(a,b){d.cancel(u.id_),f(b)||(b=1.5),u.id_=d(function(){a.css("display","none")},1e3*b)},cancel:function(){d.cancel(u.id_)}},v=e(t.container);v.length||(v=m.find("body"));var w,x,y;h+=1;var z=e('<div id="nspopover-'+h+'"></div>');g.push(z);var A=t.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!A)throw new Error('"'+t.placement+'" is not a valid placement or has a invalid combination of placements.');x=A[6]||A[3]||A[1],y=A[7]||A[4]||A[2]||"center",j.when(s(t.template,t.plain)).then(function(a){if(a=b.isString(a)?a:a.data&&b.isString(a.data)?a.data:"",z.html(a),t.theme&&z.addClass(t.theme),z.addClass("ns-popover-"+x+"-placement").addClass("ns-popover-"+y+"-align"),d(function(){l(z)(n)}),n.$on("$destroy",function(){z.remove()}),n.hidePopover=function(){u.hide(z,0)},z.css("position","absolute").css("display","none"),w=z.find(".triangle"),!w.length)for(var c=z.children(),f=0;f<c.length;++f){var g=e(c[f]);if(g.hasClass("triangle")){w=g;break}}v.append(z)}),o.on(t.trigger,function(a){a.preventDefault(),u.cancel(),z.css("display","block"),q(z,x,y,r(o[0]),w),t.hideOnClick&&z.on("click",function(){u.hide(z,0)})}),o.on("mouseout",function(){u.hide(z,t.timeout)}).on("mouseover",function(){u.cancel()}),z.on("mouseout",function(){u.hide(z,t.timeout)}).on("mouseover",function(){u.cancel()})}}})}(window,window.angular);